// Receives messages and acts based on them